# SSH Config for Bastion Jump Host
# Generated by Ansible

{% for instance in private_instances %}
Host {{ instance.name }}
    HostName {{ instance.hostname }}
    User {{ instance.user }}
    Port {{ ssh_port }}
    IdentityFile {{ private_key_path }}
    ProxyCommand ssh -W %h:%p {{ bastion_user }}@%h
    StrictHostKeyChecking no
    UserKnownHostsFile /dev/null
    ServerAliveInterval 60
    ServerAliveCountMax 10

{% endfor %}

# Global SSH settings
Host *
    ForwardAgent yes
    TCPKeepAlive yes
    ControlMaster auto
    ControlPath ~/.ssh/control-%C
    ControlPersist 1h 